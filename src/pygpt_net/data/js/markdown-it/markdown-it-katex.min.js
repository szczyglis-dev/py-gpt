/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/markdown-it-katex@2.0.3/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var katex=require("katex");function isValidDelim(r,e){var n,t,i=r.posMax,c=!0,o=!0;return n=e>0?r.src.charCodeAt(e-1):-1,t=e+1<=i?r.src.charCodeAt(e+1):-1,(32===n||9===n||t>=48&&t<=57)&&(o=!1),32!==t&&9!==t||(c=!1),{can_open:c,can_close:o}}function math_inline(r,e){var n,t,i,c;if("$"!==r.src[r.pos])return!1;if(!isValidDelim(r,r.pos).can_open)return e||(r.pending+="$"),r.pos+=1,!0;for(t=n=r.pos+1;-1!==(t=r.src.indexOf("$",t));){for(c=t-1;"\\"===r.src[c];)c-=1;if((t-c)%2==1)break;t+=1}return-1===t?(e||(r.pending+="$"),r.pos=n,!0):t-n==0?(e||(r.pending+="$$"),r.pos=n+1,!0):isValidDelim(r,t).can_close?(e||((i=r.push("math_inline","math",0)).markup="$",i.content=r.src.slice(n,t)),r.pos=t+1,!0):(e||(r.pending+="$"),r.pos=n,!0)}function math_block(r,e,n,t){var i,c,o,s,a,l=!1,u=r.bMarks[e]+r.tShift[e],p=r.eMarks[e];if(u+2>p)return!1;if("$$"!==r.src.slice(u,u+2))return!1;if(u+=2,i=r.src.slice(u,p),t)return!0;for("$$"===i.trim().slice(-2)&&(i=i.trim().slice(0,-2),l=!0),o=e;!l&&!(++o>=n)&&!((u=r.bMarks[o]+r.tShift[o])<(p=r.eMarks[o])&&r.tShift[o]<r.blkIndent);)"$$"===r.src.slice(u,p).trim().slice(-2)&&(s=r.src.slice(0,p).lastIndexOf("$$"),c=r.src.slice(u,s),l=!0);return r.line=o+1,(a=r.push("math_block","math",0)).block=!0,a.content=(i&&i.trim()?i+"\n":"")+r.getLines(e+1,o,r.tShift[e],!0)+(c&&c.trim()?c:""),a.map=[e,r.line],a.markup="$$",!0}module.exports=function(r,e){e=e||{};r.inline.ruler.after("escape","math_inline",math_inline),r.block.ruler.after("blockquote","math_block",math_block,{alt:["paragraph","reference","blockquote","list"]}),r.renderer.rules.math_inline=function(r,n){return function(r){e.displayMode=!1;try{return katex.renderToString(r,e)}catch(n){return e.throwOnError&&console.log(n),r}}(r[n].content)},r.renderer.rules.math_block=function(r,n){return function(r){e.displayMode=!0;try{return"<p>"+katex.renderToString(r,e)+"</p>"}catch(n){return e.throwOnError&&console.log(n),r}}(r[n].content)+"\n"}};
//# sourceMappingURL=/sm/6d5601e1352e1d22c8e8b51ab0e3ea84e698545be1c630b38738659c8eeec9f1.map